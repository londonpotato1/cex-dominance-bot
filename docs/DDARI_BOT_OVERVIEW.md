# 🥔 원상 따리봇 (CEX Dominance Bot)

> 암호화폐 거래소 상장 감지 및 따리 전략 자동 분석 시스템

---

## 📌 개요

신규 코인 상장 시 거래소 간 가격 차이(프리미엄/갭)를 이용한 차익거래(따리) 전략을 자동으로 분석하고 추천하는 봇.

### 핵심 기능
- 🔔 **상장 실시간 감지** - 바이낸스/바이비트/게이트 등 주요 거래소
- 📊 **전략 자동 분석** - 론 가능 여부, 현선갭, DEX 유동성, 네트워크 등
- 🎯 **전략 추천** - 상황에 맞는 최적 따리 전략 제시
- 📱 **텔레그램 알림** - 상장 감지 → 분석 → 실시간 갭 알림

---

## 🏗️ 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                      📢 상장 공지 감지                        │
│              (Binance/Bybit/Gate announcements)              │
└─────────────────────────┬───────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    🔍 자동 분석 파이프라인                     │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 론 스캔  │ │ 현선갭   │ │ DEX 체크 │ │ 네트워크 │       │
│  │ 5개 거래소│ │ 프리미엄 │ │ 유동성   │ │ 입출금   │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
└─────────────────────────┬───────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    🎯 전략 추천 엔진                          │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌──────────┐ │
│  │ 헷지갭익절 │ │ 현물 선행 │ │ 후따리    │ │ 역따리   │ │
│  │ (최우선)   │ │ (차선)    │ │ (대기형)  │ │ (역발상) │ │
│  └────────────┘ └────────────┘ └────────────┘ └──────────┘ │
└─────────────────────────┬───────────────────────────────────┘
                          ▼
┌─────────────────────────────────────────────────────────────┐
│              📱 텔레그램 알림 & 실시간 모니터링               │
│         5% → 10% → 20% → 30% 갭 도달 시 단계별 알림          │
└─────────────────────────────────────────────────────────────┘
```

---

## 📁 프로젝트 구조

```
cex_dominance_bot/
├── collectors/                 # 데이터 수집 & 분석 모듈
│   ├── margin_loan.py         # 론 가능 거래소 스캔 (Phase 1)
│   ├── listing_strategy.py    # 종합 전략 분석 (Phase 2)
│   ├── listing_alert_handler.py # 상장 감지 + 갭 알림 (Phase 3-4)
│   ├── listing_data_logger.py # 상장 데이터 자동 기록
│   ├── gate_analysis.py       # 게이트 신상 분석
│   └── ...
├── ui/                         # Streamlit 대시보드
│   ├── ddari_dashboard.py     # 메인 대시보드
│   ├── ddari_analysis_center.py # 분석센터 탭
│   ├── ddari_learning_guide.py  # 학습가이드 탭
│   └── ddari_strategy.py      # 전략 UI 컴포넌트
├── docs/                       # 문서
│   ├── DDARI_BOT_OVERVIEW.md  # 이 문서
│   ├── LISTING_STRATEGY_SYSTEM.md # 전략 시스템 상세
│   └── IMPLEMENTATION_COMPLETE.md # 구현 완료 체크리스트
├── data/                       # 데이터 저장
│   └── listing_history.csv    # 상장 히스토리 (자동 기록)
└── ddari.db                    # SQLite 데이터베이스
```

---

## 🎯 전략 유형

### 1. 헷지 갭익절 (최우선 ⭐⭐⭐)
> 론으로 숏 → 현물 롱 → 갭 수렴 시 청산

**조건:**
- ✅ 론 가능 거래소 존재
- ✅ 현선갭 5% 이상

**장점:** 리스크 최소, 확정 수익

---

### 2. 현물 선행 (차선 ⭐⭐)
> 상장 전 타 거래소에서 현물 매수 → 상장 후 프리미엄에 매도

**조건:**
- ✅ 이미 상장된 거래소 존재
- ✅ 네트워크 입금 가능

**장점:** 론 없어도 가능

---

### 3. 후따리 (대기형 ⭐)
> 상장 후 급등 → 눌림 대기 → 반등 매수

**조건:**
- ⚠️ 다른 전략 불가능 시
- ⚠️ 거래량/관심도 높은 코인

**주의:** 타이밍 중요, 리스크 높음

---

### 4. 역따리 (역발상 ⭐)
> 이미 상장된 거래소에서 숏 → 신규 상장 거래소에서 하락 시 청산

**조건:**
- ✅ 선물 숏 가능
- ✅ 가격 하락 예상 시

**주의:** 역방향 리스크

---

## 🖥️ UI 구성 (Streamlit)

### 탭 구조
```
📊 대시보드  |  🎯 분석센터  |  📖 학습가이드
```

### 대시보드 탭
- **GO 카드**: 즉시 실행 가능한 기회 (현선갭 + 론 + 전략)
- **게이트 신상 모니터**: 최근 상장 코인 프리미엄 추적
- **펀딩비 바**: 실시간 펀딩비 현황 (하단 고정)

### 분석센터 탭
- **전략 분석**: 코인별 상세 전략 분석
- **론 가능 현황**: 5개 거래소 론 가능 여부
- **네트워크 상태**: 입출금 가능 체인

### 학습가이드 탭
- **따리 기초**: 용어 설명, 기본 개념
- **전략별 가이드**: 각 전략 상세 설명
- **리스크 관리**: 주의사항, 손절 기준

---

## 🔧 사용법

### 대시보드 실행
```bash
cd cex_dominance_bot
streamlit run ui/ddari_dashboard.py
```

### 상장 데이터 라벨링 (백테스트용)
```bash
python -m collectors.listing_data_logger label
```

### 텔레그램 봇 실행
```bash
python main.py
```

---

## 📊 데이터베이스

### 주요 테이블
- `gate_new_listings` - 게이트 신규 상장 목록
- `gate_analysis_log` - 프리미엄 히스토리
- `funding_rates` - 펀딩비 기록

### DB 위치
```
cex_dominance_bot/ddari.db  # 루트 디렉토리
```

---

## 🚀 향후 계획

- [ ] 백테스트 시스템 (상장 히스토리 기반)
- [ ] 자동 매매 연동 (API)
- [ ] 더 많은 거래소 지원
- [ ] 알림 커스터마이징

---

## 📅 개발 히스토리

| 날짜 | 작업 |
|------|------|
| 2026-02-01 | Phase 1-4 완료, UI 개편 (3탭), 데이터 자동 기록 |

---

## 🥔 만든이

**런던감자** + **감비** (AI 비서)

```
"따리는 타이밍이다" - 런던감자
```
